<!-- üåê BePeace Floating Global Language Selector (Working Version) -->
<style>
  #lang-toggle {
    position: fixed;
    bottom: 80px;
    right: 25px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ff91ae, #ffb6c1);
    color: white;
    border: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    cursor: pointer;
    z-index: 99999;
    transition: all 0.3s ease;
    font-size: 22px;
    animation: pulseGlow 3.5s infinite ease-in-out;
  }

  @keyframes pulseGlow {
    0% { box-shadow: 0 0 0 0 rgba(255,145,174,0.6); transform: scale(1); }
    50% { box-shadow: 0 0 20px 8px rgba(255,145,174,0.4); transform: scale(1.05); }
    100% { box-shadow: 0 0 0 0 rgba(255,145,174,0.6); transform: scale(1); }
  }

  #lang-toggle:hover {
    transform: scale(1.15);
    animation: none;
  }

  #google_translate_container {
    position: fixed;
    bottom: 140px;
    right: 25px;
    z-index: 99998;
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all 0.3s ease;
  }

  #google_translate_container.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  #google_translate_element {
    background: #fff;
    border: 1px solid #ffb6c1;
    border-radius: 12px;
    padding: 10px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.2);
  }

  .goog-te-combo {
    border-radius: 8px;
    padding: 6px 10px;
    border: 1px solid #ff91ae;
    background-color: #fff0f6;
    color: #333;
    font-size: 13px;
  }

  .goog-te-banner-frame.skiptranslate { display: none !important; }
  body { top: 0px !important; }
</style>

<!-- üåê Floating Globe Button -->
<button id="lang-toggle" title="Choose Language">üåê</button>

<!-- Hidden Dropdown -->
<div id="google_translate_container">
  <div id="google_translate_element"></div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const toggle = document.getElementById("lang-toggle");
  const container = document.getElementById("google_translate_container");

  // Flag icons
  const flags = {
    en: "üåê", hi: "üáÆüá≥", fr: "üá´üá∑", es: "üá™üá∏", de: "üá©üá™", it: "üáÆüáπ",
    ar: "üá∏üá¶", ru: "üá∑üá∫", zh: "üá®üá≥", ja: "üáØüáµ", ko: "üá∞üá∑", pt: "üáµüáπ",
    ur: "üáµüá∞", ta: "üáÆüá≥", te: "üáÆüá≥", th: "üáπüá≠", vi: "üáªüá≥"
  };

  // Toggle dropdown
  toggle.addEventListener("click", (e) => {
    e.stopPropagation();
    container.classList.toggle("active");
  });

  // Close if clicking outside
  document.addEventListener("click", (e) => {
    if (!container.contains(e.target) && !toggle.contains(e.target)) {
      container.classList.remove("active");
    }
  });

  // Cookie helpers
  function setCookie(name, value, days) {
    const d = new Date();
    d.setTime(d.getTime() + (days*24*60*60*1000));
    document.cookie = `${name}=${value};expires=${d.toUTCString()};path=/`;
  }
  function getCookie(name) {
    const v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
    return v ? v[2] : null;
  }

  // Check when Translate dropdown appears
  const observer = new MutationObserver(() => {
    const select = document.querySelector(".goog-te-combo");
    if (select) {
      const savedLang = getCookie("bepeace_lang");
      if (savedLang && savedLang !== "en") {
        select.value = savedLang;
        select.dispatchEvent(new Event("change"));
        toggle.textContent = flags[savedLang] || "üåê";
      }

      select.addEventListener("change", () => {
        const lang = select.value.split('-')[0];
        toggle.textContent = flags[lang] || "üåê";
        setCookie("bepeace_lang", lang, 30);
      });
    }
  });
  observer.observe(document.body, { childList: true, subtree: true });
});

// ‚úÖ Google Translate Init
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    includedLanguages: 'af,sq,am,ar,hy,az,eu,be,bn,bg,ca,ceb,zh-CN,zh-TW,hr,cs,da,nl,en,et,fi,fr,de,el,gu,he,hi,hu,id,it,ja,kn,ko,ml,mr,my,ne,no,pa,pl,pt,ro,ru,si,sk,sl,so,es,sw,sv,ta,te,th,tr,uk,ur,vi,zh,zu',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
  }, 'google_translate_element');
}
</script>

<!-- ‚úÖ Make sure Google Script loads over HTTPS -->
<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async defer></script>