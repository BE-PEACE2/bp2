<!-- üåê Animated + Flag-Switching + Remembering Language Selector -->
<style>
  #lang-toggle {
    position: fixed;
    bottom: 80px;
    right: 25px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ff91ae, #ffb6c1);
    color: white;
    border: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    cursor: pointer;
    z-index: 9999;
    transition: all 0.3s ease;
    font-size: 22px;
    animation: pulseGlow 3.5s infinite ease-in-out;
  }

  @keyframes pulseGlow {
    0% { box-shadow: 0 0 0 0 rgba(255,145,174,0.6); transform: scale(1); }
    50% { box-shadow: 0 0 20px 8px rgba(255,145,174,0.4); transform: scale(1.05); }
    100% { box-shadow: 0 0 0 0 rgba(255,145,174,0.6); transform: scale(1); }
  }

  #lang-toggle:hover {
    transform: scale(1.15) rotate(6deg);
    box-shadow: 0 6px 16px rgba(0,0,0,0.35);
    animation: none;
  }

  #google_translate_container {
    position: fixed;
    bottom: 140px;
    right: 25px;
    z-index: 9998;
    opacity: 0;
    transform: translateY(10px);
    visibility: hidden;
    transition: all 0.4s ease-in-out;
  }

  #google_translate_container.active {
    opacity: 1;
    transform: translateY(0);
    visibility: visible;
  }

  #google_translate_element {
    background-color: #ffffff;
    border-radius: 12px;
    padding: 10px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.2);
    border: 1px solid #ffb6c1;
    animation: fadeUp 0.4s ease forwards;
  }

  .goog-te-combo {
    border-radius: 8px;
    padding: 6px 10px;
    border: 1px solid #ff91ae;
    background-color: #fff0f6;
    color: #333;
    font-size: 13px;
    font-weight: 500;
    transition: all 0.25s ease-in-out;
  }

  .goog-te-combo:hover {
    background-color: #ffb6c1;
    color: #fff;
  }

  .goog-te-banner-frame.skiptranslate { display: none !important; }
  body { top: 0px !important; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 600px) {
    #lang-toggle {
      width: 45px;
      height: 45px;
      font-size: 20px;
      bottom: 70px;
      right: 20px;
    }
    #google_translate_container { right: 15px; }
  }
</style>

<!-- üåê Button + Hidden Dropdown -->
<button id="lang-toggle" title="Choose Language">üåê</button>

<div id="google_translate_container">
  <div id="google_translate_element"></div>
</div>

<!-- ‚úÖ Google Translate Integration -->
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", () => {
  const toggle = document.getElementById("lang-toggle");
  const container = document.getElementById("google_translate_container");

  // üåé Language ‚Üí Flag Map
  const flags = {
    en: "üåê", hi: "üáÆüá≥", fr: "üá´üá∑", es: "üá™üá∏", de: "üá©üá™", it: "üáÆüáπ",
    ar: "üá∏üá¶", ru: "üá∑üá∫", zh: "üá®üá≥", ja: "üáØüáµ", ko: "üá∞üá∑", pt: "üáµüáπ",
    ur: "üáµüá∞", ta: "üáÆüá≥", te: "üáÆüá≥", th: "üáπüá≠", vi: "üáªüá≥", fa: "üáÆüá∑",
    bn: "üáßüá©", tr: "üáπüá∑", nl: "üá≥üá±", pl: "üáµüá±"
  };

  // üåê Toggle dropdown
  toggle.addEventListener("click", (e) => {
    e.stopPropagation();
    container.classList.toggle("active");
  });

  // üß≠ Auto close on outside click
  document.addEventListener("click", (e) => {
    if (!container.contains(e.target) && !toggle.contains(e.target)) {
      container.classList.remove("active");
    }
  });

  // üç™ Save Language Choice in Cookie
  function setCookie(name, value, days) {
    const d = new Date();
    d.setTime(d.getTime() + (days*24*60*60*1000));
    document.cookie = `${name}=${value};expires=${d.toUTCString()};path=/`;
  }

  function getCookie(name) {
    const v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');
    return v ? v[2] : null;
  }

  // üëÇ Observe Google Translate dropdown creation
  const observer = new MutationObserver(() => {
    const select = document.querySelector(".goog-te-combo");
    if (select) {
      // Restore previous language
      const savedLang = getCookie("bepeace_lang");
      if (savedLang && savedLang !== "en") {
        select.value = savedLang;
        select.dispatchEvent(new Event("change"));
        toggle.textContent = flags[savedLang] || "üåê";
      }

      // When user changes language
      select.addEventListener("change", () => {
        const lang = select.value.split('-')[0];
        toggle.textContent = flags[lang] || "üåê";
        setCookie("bepeace_lang", lang, 30); // save for 30 days
      });
    }
  });

  observer.observe(document.body, { childList: true, subtree: true });
});

// üß† Google Translate Initialization
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    includedLanguages: 'af,sq,am,ar,hy,az,eu,be,bn,bg,ca,ceb,zh-CN,zh-TW,co,hr,cs,da,nl,en,eo,et,fi,fr,fy,gl,ka,de,el,gu,ht,ha,haw,he,hi,hmn,hu,is,ig,id,ga,it,ja,jw,kn,kk,km,ko,ku,ky,lo,la,lv,lt,lb,mg,ms,ml,mt,mi,mk,mn,my,ne,no,ny,or,ps,fa,pl,pt,pa,ro,ru,sm,gd,sr,st,si,sk,sl,so,es,su,sw,sv,tg,ta,te,th,tr,uk,ur,uz,vi,cy,xh,yi,yo,zu',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
  }, 'google_translate_element');
}
</script>

<!-- ‚úÖ Google Translate Script -->
<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>